(function (root, factory) {
  if (typeof define === 'function' && define.amd)
    define(['exports', 'kotlin'], factory);
  else if (typeof exports === 'object')
    factory(module.exports, require('kotlin'));
  else {
    if (typeof kotlin === 'undefined') {
      throw new Error("Error loading module 'fullStackWithKtor'. Its dependency 'kotlin' was not found. Please, check whether 'kotlin' is loaded prior to 'fullStackWithKtor'.");
    }
    root.fullStackWithKtor = factory(typeof fullStackWithKtor === 'undefined' ? {} : fullStackWithKtor, kotlin);
  }
}(this, function (_, Kotlin) {
  'use strict';
  var ensureNotNull = Kotlin.ensureNotNull;
  var throwCCE = Kotlin.throwCCE;
  var Unit = Kotlin.kotlin.Unit;
  function main$lambda$lambda(it) {
    var tmp$, tmp$_0;
    var div = Kotlin.isType(tmp$ = document.getElementById('history'), HTMLTableElement) ? tmp$ : throwCCE();
    div.innerHTML = div.innerHTML + '<br>' + (typeof (tmp$_0 = it.data) === 'string' ? tmp$_0 : throwCCE());
    return Unit;
  }
  function main$lambda$lambda_0(closure$ws) {
    return function (it) {
      var tmp$;
      var message = (Kotlin.isType(tmp$ = document.getElementById('message'), HTMLInputElement) ? tmp$ : throwCCE()).value;
      closure$ws.send(message);
      return Unit;
    };
  }
  function main$lambda$lambda_1(closure$ws) {
    return function (it) {
      closure$ws.send('cleaning');
      return Unit;
    };
  }
  function main() {
    var tmp$, tmp$_0;
    var name = ensureNotNull(document.getElementsByTagName('h1')[0]).innerHTML;
    var $receiver = new WebSocket('ws://localhost:8080/main/chats/' + name);
    $receiver.onmessage = main$lambda$lambda;
    var ws = $receiver;
    var $receiver_0 = Kotlin.isType(tmp$ = document.getElementById('send'), HTMLInputElement) ? tmp$ : throwCCE();
    $receiver_0.onclick = main$lambda$lambda_0(ws);
    $receiver_0.value = 'SEND';
    var $receiver_1 = Kotlin.isType(tmp$_0 = document.getElementById('clear'), HTMLInputElement) ? tmp$_0 : throwCCE();
    $receiver_1.onclick = main$lambda$lambda_1(ws);
    $receiver_1.value = 'CLEAR';
  }
  _.main = main;
  main();
  return _;
})); //# sourceMappingURL=fullStackWithKtor.js.map

//# sourceMappingURL=fullStackWithKtor.js.map
